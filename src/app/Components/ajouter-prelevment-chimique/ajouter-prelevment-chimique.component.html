<div class="grid">
  <div class="col-12 card px-6 py-6 ">
    <p-toolbar styleClass="mb-4" >
      <ng-template pTemplate="end"  >
        <div class=" my-2 " >

          <button pButton pRipple label="Retour" icon="pi pi-arrow-left" class="p-button-success mr-2 " (click)="retour()"></button>
        </div>
      </ng-template>
      <h4>Ajouter Analyse Chimique</h4>
    </p-toolbar>
    <div class=" flex justify-content-between  mt-8 border-1 border-round border-gray-300 p-6  h-30rem">
    <div class=" gap-3  flex flex-column    justify-content-between col-3 ">
      <p-floatLabel >
        <input  class="p-2 shadow-1" type="date" pInputText id="dateCreation"  [(ngModel)]="analysesChimique.dateAnalyse" [value]="analysesChimique.dateAnalyse" />
        <label for="dateCreation">Date création</label>
<!--        <p-calendar id="dateCreation" dateFormat="yy-mm-dd" [(ngModel)]="bassin.dateCreation"  [ngClass]="{'ng-invalid ng-dirty' : submitted && !bassin.dateCreation}" [showIcon]="true"></p-calendar>-->
<!--        <small class="ng-dirty ng-invalid" *ngIf="submitted && !bassin.dateCreation">poste is required.</small>-->
      </p-floatLabel>
    <p-floatLabel>
      <input type="text" pInputText [(ngModel)]="analysesChimique.reference" id="Reference" class="w-full"  />
      <label >Reference</label>
    </p-floatLabel>
     <p-floatLabel>
      <input type="text" pInputText [(ngModel)]="analysesChimique.temperature"  id="temperature" class="w-full" />
      <label >Température °C</label>


    </p-floatLabel>
      <p-floatLabel>
      <input type="text" pInputText [(ngModel)]="analysesChimique.vent"  id="vent" class="w-full" />
      <label >Vent Km/h</label>


    </p-floatLabel>
      <p-floatLabel>
        <input type="text" pInputText [(ngModel)]="analysesChimique.matiere"  id="matiere" placeholder="Exp saumure , sel ..." class="w-full" />
        <label >Matiére</label>

      </p-floatLabel>
      <p-floatLabel>
        <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="analysesChimique.description"  class="w-full" ></textarea>
        <label >Description</label>
      </p-floatLabel>
    </div>
      <div class="flex flex-column justify-content-between col-4">

        <p-tabView *ngIf="!isUpdateAnalyseChimique"[scrollable]="true">
          <p-tabPanel header="Puit" >
            <p-listbox [options]="puits" [(ngModel)]="selectedPuit" (ngModelChange)="selectPuit()" optionLabel="nom" [filter]="true"  [listStyle]="{'height': '87px'}" ></p-listbox>

          </p-tabPanel>
          <p-tabPanel header="Bassin" >
            <p-listbox [options]="bassins" [(ngModel)]="selectedBassin" optionLabel="nom" (ngModelChange)="selectBassin()"[filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>

          </p-tabPanel>
          <p-tabPanel header="Sotck non lavé" pTooltip="Enter your username" >
            <p-listbox [options]="sbnls" [(ngModel)]="selectedSbnl" optionLabel="reference" (ngModelChange)="selectSBNL()" [filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>

          </p-tabPanel>
          <p-tabPanel header="Bande" pTooltip="Enter your username" >
            <p-listbox [options]="bandes" [(ngModel)]="selectedBande" optionLabel="reference" (ngModelChange)="selectBande()"[filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>

          </p-tabPanel>
          <p-tabPanel header="Sotck lavé" >
            <p-listbox [options]="sbls" [(ngModel)]="selectedSbl" optionLabel="reference" [filter]="true" (ngModelChange)="selectSBL()"[listStyle]="{'height': '87px'}" ></p-listbox>

          </p-tabPanel>

          <p-tabPanel header="Sotck finale" >
            <p-listbox [options]="sblfs" [(ngModel)]="selectedSblf" optionLabel="reference" [filter]="true" (ngModelChange)="selectSBLF()" [listStyle]="{'height': '87px'}" ></p-listbox>

          </p-tabPanel>
        </p-tabView>
        <div >
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique&&selectedPuit && selectedPuit.hasOwnProperty('id')">
            <p class="font-bold">
              Puit
            </p>
            <div class="flex flex-column ">

              <p><span class="font-bold"> Reference: </span>{{selectedPuit.reference}}</p>
              <p><span class="font-bold"> Nom: </span>{{selectedPuit.nom}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>

            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Puit" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedPuit.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedPuit.description}}</p>
                </div><div class="field">
                  <p><span class="font-bold"> Nom: </span>{{selectedPuit.nom}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Emplacement: </span>{{selectedPuit.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Etat: </span>{{selectedPuit.etat}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Date de Creation: </span>{{selectedPuit.dateCreation}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Date de Fermeture: </span>{{selectedPuit.dateFermeture}}</p>
                </div>

              </ng-template>




            </p-dialog>
          </div>
<!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique&&(selectedBassin!=undefined && selectedBassin.hasOwnProperty('id'))">
            <p class="font-bold">
              Bassin
            </p>
            <div class="flex flex-column ">

              <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>
              <p><span class="font-bold"> Nom: </span>{{selectedBassin.nom}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>

            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Bassin" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedBassin.description}}</p>
                </div><div class="field">
                <p><span class="font-bold"> Nom: </span>{{selectedBassin.nom}}</p>
              </div>
                <div class="field">
                  <p><span class="font-bold"> Emplacement: </span>{{selectedBassin.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Etat: </span>{{selectedBassin.etat}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Date de Creation: </span>{{selectedBassin.dateCreation}}</p>
                </div>


              </ng-template>




            </p-dialog>
          </div>

<!--          =========-->
<!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique&&(selectedSbnl!=undefined && selectedSbnl.hasOwnProperty('id'))">
            <p class="font-bold">
              Sbnl
            </p>
            <div class="flex flex-column ">

              <p><span class="font-bold"> Reference: </span>{{selectedSbnl.reference}}</p>
              <p><span class="font-bold">  Emplacement: </span>{{selectedSbnl.emplacement}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>

            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Sbnl" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedSbnl.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold">  Emplacement: </span>{{selectedSbnl.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedSbnl.description}}</p>
                </div>
                <div class="field">
                <p><span class="font-bold"> Quantite: </span>{{selectedSbnl.quantite}}</p>
              </div>

                <div class="field">
                  <p><span class="font-bold"> Etat: </span>{{selectedSbnl.etat}}</p>
                </div>



              </ng-template>




            </p-dialog>
          </div>

          <!--          =========-->

          <!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique && selectedBande!=undefined && selectedBande.hasOwnProperty('id')">
            <p class="font-bold">
              Bande
            </p>
            <div class="flex flex-column ">

              <p><span class="font-bold"> Reference: </span>{{selectedBande.reference}}</p>
              <p><span class="font-bold">  Etat: </span>{{selectedBande.etat}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>

            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Bande" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedBande.reference}}</p>
                </div>

                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedBande.description}}</p>
                </div>
                <div class="field">
                  <div class="field">
                    <p><span class="font-bold"> Etat: </span>{{selectedBande.etat}}</p>
                  </div>
                  <p><span class="font-bold"> Quantite: </span>{{selectedBande.quantite}}</p>
                </div>

                <div class="field">
                  <p><span class="font-bold"> Quantite Refus: </span>{{selectedBande.quantiteRefus}}</p>
                </div>


              </ng-template>




            </p-dialog>
          </div>

          <!--          =========-->
          <!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique&&selectedSbl!=undefined && selectedSbl.hasOwnProperty('id')">
            <p class="font-bold">
              Sbl
            </p>
            <div class="flex flex-column ">
              <p><span class="font-bold"> Reference: </span>{{selectedSbl.reference}}</p>
              <p><span class="font-bold">  Emplacement: </span>{{selectedSbl.emplacement}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>
            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Sbl" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedSbl.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold">  Emplacement: </span>{{selectedSbl.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedSbl.description}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Quantite: </span>{{selectedSbl.quantite}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Etat: </span>{{selectedSbl.etat}}</p>
                </div>
              </ng-template>
            </p-dialog>
          </div>
          <!--          =========-->
          <!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalyseChimique&&selectedSblf !=undefined && selectedSblf.hasOwnProperty('id') ">
            <p class="font-bold">
              Sblf
            </p>
            <div class="flex flex-column ">
              <p><span class="font-bold"> Reference: </span>{{selectedSblf.reference}}</p>
              <p><span class="font-bold">  Emplacement: </span>{{selectedSblf.emplacement}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>
            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details de Sblf" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedSblf.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold">  Emplacement: </span>{{selectedSblf.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedSblf.description}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Quantite: </span>{{selectedSblf.quantite}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Etat: </span>{{selectedSblf.etat}}</p>
                </div>
              </ng-template>
            </p-dialog>
          </div>
          <!--          =========-->
        </div>
      </div>

      <div class="card flex col-4 ">
        <div class="flex flex-column gap-5 h-full flex-wrap ">
          <p-checkbox [(ngModel)]="SelectAll" (ngModelChange)="SelectAllCheck()" [binary]="true" inputId="binary" class="text-primary" label="Tout"></p-checkbox>

          <div class="flex align-items-center  gap-1 " *ngFor="let attribut of attributs">
            <p-checkbox [(ngModel)]="attribut.checked" [binary]="true" Id="ny"></p-checkbox>
            <label for="ny" class="font-bold">{{attribut.name}}</label>
          </div>
        </div>

      </div>
    </div>

    <div class="mt-4 border-1 border-round border-gray-300 p-6 ">
      <div class="row flex flex-wrap justify-content-evenly">

        <div *ngFor="let attribut of getattributs()"  class="m-3   ">

            <p-floatLabel>
              <input type="text" pInputText [(ngModel)]="attribut.value"  id="check" class="w-full" [name]="attribut.name"/>

<!--              <p-inputNumber class="" [(ngModel)]="attribut.value"  inputId="mile" suffix="  {{attribut.unite}}" mode="decimal" locale="en-US" [minFractionDigits]="3" [name]="attribut.name"></p-inputNumber>-->
              <label>{{attribut.label}}</label>
            </p-floatLabel>

        </div>
      </div>
    </div>
    <!---->
    <div class=" flex col-12 justify-content-end">
    <button pButton label="Enregisrer" icon="pi pi-check" class=" " (click)="saveAnalyseChimique()"></button>
    </div>
  </div>
</div>



