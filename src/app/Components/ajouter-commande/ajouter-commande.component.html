<div class="grid">
  <div class="col-12 card px-6 py-6 ">
    <p-toolbar styleClass="mb-4" >
      <ng-template pTemplate="end"  >
        <div class=" my-2 " >

          <button pButton pRipple label="Back" icon="pi pi-arrow-left" class="p-button-success mr-2 " (click)="retour()"></button>
        </div>
      </ng-template>
      <h4>Add Command</h4>
    </p-toolbar>
    <div class=" flex justify-content-between  mt-8 border-1 border-round border-gray-300 p-6  h-22rem">
      <div class="  flex flex-column   justify-content-between ">
        <p-floatLabel >
          <p-calendar   id="dateCommande" [(ngModel)]="commande.dateCommande" dateFormat="yy-MM-dd"  [showIcon]="true"></p-calendar>
          <label for="dateCommande">Command Date</label>
        </p-floatLabel>
        <p-floatLabel>
          <input type="text" pInputText [(ngModel)]="commande.nom" id="nom" class="w-full"  />
          <label for="nom">Name</label>
        </p-floatLabel>
        <p-floatLabel>
          <input type="text" pInputText [(ngModel)]="commande.etat"    id="etat" class="w-full" />
          <label for="etat">State</label>
        </p-floatLabel>
      </div>
      <div class="flex flex-column" *ngIf="selectedBassin!==null">

        <div class="field ">
          <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>
        </div>
        <div class="field">
          <p><span class="font-bold"> Description: </span>{{selectedBassin.description}}</p>
        </div><div class="field">
        <p><span class="font-bold"> Name: </span>{{selectedBassin.nom}}</p>
      </div>
        <div class="field">
          <p><span class="font-bold"> Location: </span>{{selectedBassin.emplacement}}</p>
        </div>
        <div class="field">
          <p><span class="font-bold"> State: </span>{{selectedBassin.etat}}</p>
        </div>
        <div class="field">
          <p><span class="font-bold"> Creation Date: </span>{{selectedBassin.dateCreation}}</p>
        </div>

      </div>

      <div class="  ">

        <p-tabView *ngIf="!isUpdateAnalysePhysique"[scrollable]="true" >
          <p-tabPanel header="Pond" >
            <p-listbox [options]="bassins" [(ngModel)]="selectedBassin" (click)="getLine()" optionLabel="nom" [filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>

          </p-tabPanel>
<!--          <p-tabPanel header="Sotck non lavé" pTooltip="Sotck non lavé">-->
<!--            <p-listbox [options]="sbnls" [(ngModel)]="selectedSbnl" optionLabel="reference" [filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>-->

<!--          </p-tabPanel>-->
<!--          <p-tabPanel header="Bande" pTooltip="Sotck non lavé">-->
<!--            <p-listbox [options]="bandes" [(ngModel)]="selectedBande" optionLabel="reference" [filter]="true" [listStyle]="{'height': '87px'}"  ></p-listbox>-->

<!--          </p-tabPanel>-->

<!--          <p-tabPanel header="Washed stock" >-->
<!--            <p-listbox [options]="sbls" [(ngModel)]="selectedSbl" optionLabel="reference" [filter]="true" [listStyle]="{'height': '87px'}" ></p-listbox>-->

<!--          </p-tabPanel>-->

<!--          <p-tabPanel header="Final stock" >-->
<!--            <p-listbox [options]="sblfs" [(ngModel)]="selectedSblf" optionLabel="reference" [filter]="true"  [listStyle]="{'height': '87px'}" ></p-listbox>-->
<!--          </p-tabPanel>-->

        </p-tabView>
        <div >
          <!--          =========-->
          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalysePhysique&&selectedBassin">
            <p class="font-bold">
              Pond
            </p>
            <div class="flex flex-column ">

              <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>
              <p><span class="font-bold"> Name: </span>{{selectedBassin.nom}}</p>
              <div class=" flex justify-content-end">
                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>
              </div>

            </div>
            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Pool Details" [modal]="true" class="p-fluid">
              <ng-template pTemplate="content">
                <div class="field">
                  <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Description: </span>{{selectedBassin.description}}</p>
                </div><div class="field">
                <p><span class="font-bold"> Name: </span>{{selectedBassin.nom}}</p>
              </div>
                <div class="field">
                  <p><span class="font-bold"> Location: </span>{{selectedBassin.emplacement}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> State: </span>{{selectedBassin.etat}}</p>
                </div>
                <div class="field">
                  <p><span class="font-bold"> Creation Date: </span>{{selectedBassin.dateCreation}}</p>
                </div>

              </ng-template>

            </p-dialog>
          </div>

          <!--          =========-->
          <!--          =========-->
<!--          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalysePhysique&&selectedSbnl">-->
<!--            <p class="font-bold">-->
<!--              Sbnl-->
<!--            </p>-->
<!--            <div class="flex flex-column ">-->

<!--              <p><span class="font-bold"> Reference: </span>{{selectedSbnl.reference}}</p>-->
<!--              <p><span class="font-bold">  Emplacement: </span>{{selectedSbnl.emplacement}}</p>-->
<!--              <div class=" flex justify-content-end">-->
<!--                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>-->
<!--              </div>-->

<!--            </div>-->
<!--            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details of Sbnl" [modal]="true" class="p-fluid">-->
<!--              <ng-template pTemplate="content">-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Reference: </span>{{selectedBassin.reference}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold">  Emplacement: </span>{{selectedSbnl.emplacement}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Description: </span>{{selectedSbnl.description}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Quantity: </span>{{selectedSbnl.quantite}}</p>-->
<!--                </div>-->

<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> State: </span>{{selectedSbnl.etat}}</p>-->
<!--                </div>-->

<!--              </ng-template>-->
<!--            </p-dialog>-->
<!--          </div>-->

          <!--          =========-->

          <!--          =========-->
<!--          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalysePhysique&&selectedBande">-->
<!--            <p class="font-bold">-->
<!--              Bande-->
<!--            </p>-->
<!--            <div class="flex flex-column ">-->

<!--              <p><span class="font-bold"> Reference: </span>{{selectedBande.reference}}</p>-->
<!--              <p><span class="font-bold">  State: </span>{{selectedBande.etat}}</p>-->
<!--              <div class=" flex justify-content-end">-->
<!--                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>-->
<!--              </div>-->

<!--            </div>-->
<!--            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details of Sbnl" [modal]="true" class="p-fluid">-->
<!--              <ng-template pTemplate="content">-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Reference: </span>{{selectedBande.reference}}</p>-->
<!--                </div>-->

<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Description: </span>{{selectedBande.description}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> State: </span>{{selectedBande.etat}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Quantity Totale: </span>{{selectedBande.quantite}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Quantity Refusal: </span>{{selectedBande.quantiteRefus}}</p>-->
<!--                </div>-->


<!--              </ng-template>-->
<!--            </p-dialog>-->
<!--          </div>-->

          <!--          =========-->
          <!--          =========-->
<!--          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalysePhysique&&selectedSbl">-->
<!--            <p class="font-bold">-->
<!--              Sbl-->
<!--            </p>-->
<!--            <div class="flex flex-column ">-->
<!--              <p><span class="font-bold"> Reference: </span>{{selectedSbl.reference}}</p>-->
<!--              <p><span class="font-bold">  Emplacement: </span>{{selectedSbl.emplacement}}</p>-->
<!--              <div class=" flex justify-content-end">-->
<!--                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>-->
<!--              </div>-->
<!--            </div>-->
<!--            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details of Sbl" [modal]="true" class="p-fluid">-->
<!--              <ng-template pTemplate="content">-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Reference: </span>{{selectedSbl.reference}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold">  Emplacement: </span>{{selectedSbl.emplacement}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Description: </span>{{selectedSbl.description}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Quantity: </span>{{selectedSbl.quantite}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> State: </span>{{selectedSbl.etat}}</p>-->
<!--                </div>-->
<!--              </ng-template>-->
<!--            </p-dialog>-->
<!--          </div>-->
          <!--          =========-->
          <!--          =========-->
<!--          <div class="border-1 border-round border-gray-300 p-2 " *ngIf="isUpdateAnalysePhysique&&selectedSblf">-->
<!--            <p class="font-bold">-->
<!--              Sblf-->
<!--            </p>-->
<!--            <div class="flex flex-column ">-->
<!--              <p><span class="font-bold"> Reference: </span>{{selectedSblf.reference}}</p>-->
<!--              <p><span class="font-bold">  Emplacement: </span>{{selectedSblf.emplacement}}</p>-->
<!--              <div class=" flex justify-content-end">-->
<!--                <button pButton pRipple label="Details" icon="pi pi-eye" class="p-button-primary mr-2 " (click)="openNew()"></button>-->
<!--              </div>-->
<!--            </div>-->

<!--            <p-dialog [(visible)]="visibleDetails" [style]="{width: '450px'}" header="Details of Sbl" [modal]="true" class="p-fluid">-->
<!--              <ng-template pTemplate="content">-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Reference: </span>{{selectedSblf.reference}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold">  Emplacement: </span>{{selectedSblf.emplacement}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Description: </span>{{selectedSblf.description}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> Quantity: </span>{{selectedSblf.quantite}}</p>-->
<!--                </div>-->
<!--                <div class="field">-->
<!--                  <p><span class="font-bold"> State: </span>{{selectedSblf.etat}}</p>-->
<!--                </div>-->
<!--              </ng-template>-->
<!--            </p-dialog>-->
<!--          </div>-->
          <!--          =========-->
        </div>
      </div>


    </div>

<!--    <div class=" flex col-12 justify-content-end mt-6 ">-->
<!--      <button pButton label="Add Sieve" icon="pi pi-plus" class="p-button-success " (click)="ajouterTamis()"></button>-->
<!--    </div>-->

<!--    <p-dialog [(visible)]="visibale" [style]="{width: '450px'}" header="Add Sieve" [modal]="true" class="p-fluid">-->

<!--      <div class="  flex flex-column gap-4 ">-->

<!--        <p-floatLabel>-->
<!--          <p-inputNumber id="certificat" class="w-1/2 " [(ngModel)]="tamis.calibre"  mode="decimal" locale="en-US" [minFractionDigits]="3"></p-inputNumber>-->
<!--          <label>Calibre</label>-->
<!--        </p-floatLabel>-->

<!--        <p-floatLabel>-->
<!--          <p-inputNumber id="qui" [(ngModel)]="tamis.masse"   mode="decimal" locale="en-US" [minFractionDigits]="3"></p-inputNumber>-->
<!--          <label>Weight</label>-->
<!--        </p-floatLabel>-->

<!--        &lt;!&ndash;        <p-floatLabel>&ndash;&gt;-->
<!--        &lt;!&ndash;          <p-inputNumber id="nomVisa" class="w-full " [(ngModel)]="tamis.refus" mode="decimal" locale="en-US" [minFractionDigits]="3"></p-inputNumber>&ndash;&gt;-->
<!--        &lt;!&ndash;          <label>Refus</label>&ndash;&gt;-->
<!--        &lt;!&ndash;        </p-floatLabel>&ndash;&gt;-->

<!--        &lt;!&ndash;        <p-floatLabel>&ndash;&gt;-->
<!--        &lt;!&ndash;          <p-inputNumber id="natureAction" class="" [(ngModel)]="tamis.refusCumulated" mode="decimal" locale="en-US" [minFractionDigits]="3"></p-inputNumber>&ndash;&gt;-->
<!--        &lt;!&ndash;          <label>Refus Cumulated</label>&ndash;&gt;-->
<!--        &lt;!&ndash;        </p-floatLabel>&ndash;&gt;-->

<!--        &lt;!&ndash;        <p-floatLabel>&ndash;&gt;-->
<!--        &lt;!&ndash;          <p-inputNumber id="observation" class="w-full " [(ngModel)]="tamis.passCumulated"  mode="decimal" locale="en-US" [minFractionDigits]="3"></p-inputNumber>&ndash;&gt;-->
<!--        &lt;!&ndash;          <label>Pass Cumulated</label>&ndash;&gt;-->
<!--        &lt;!&ndash;        </p-floatLabel>&ndash;&gt;-->



<!--      </div>-->
<!--      <ng-template pTemplate="footer">-->
<!--        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>-->
<!--        <button pButton pRipple label="Add" icon="pi pi-check" class="p-button-text" (click)="saveTamis()"></button>-->
<!--      </ng-template>-->

<!--    </p-dialog>-->
<!--    <p-table #dt [value]="listeTamis" [columns]="cols"  responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['calibre']" [paginator]="true" [rowsPerPageOptions]="[10,20,30,100,200]" [showCurrentPageReport]="true" currentPageReportTemplate="Displaying {first} to {last} of {totalRecords} entries"" [(selection)]="selectedIntervention" selectionMode="multiple" [rowHover]="true" dataKey="id">-->
<!--      <ng-template pTemplate="caption">-->
<!--        <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">-->
<!--          <h5 class="m-0">Thames Management</h5>-->
<!--          <span class="block mt-2 md:mt-0 p-input-icon-left">-->
<!--                            <i class="pi pi-search"></i>-->
<!--                            <input  type="text" pInputText (input)="onGlobalFilter(dt, $event)" placeholder="Search..."  class="w-full sm:w-auto"/>-->
<!--                        </span>-->



<!--        </div>-->
<!--      </ng-template>-->
<!--      <ng-template pTemplate="header">-->
<!--        <tr>-->

<!--          <th >Calibre </th>-->
<!--          <th >Weight </th>-->
<!--          <th >Refus </th>-->
<!--          <th >Refus Cumulated</th>-->
<!--          <th >pass Cumulated </th>-->
<!--          <th></th>-->
<!--        </tr>-->
<!--      </ng-template>-->
<!--      <ng-template pTemplate="body" let-tamis >-->
<!--        <tr >-->

<!--          <td ><span class="p-column-title" >Calibre</span>-->
<!--            {{tamis.calibre}}-->
<!--          </td>-->
<!--          <td>-->
<!--            <span class="p-column-title">Weight</span>-->
<!--            {{tamis.masse}}-->
<!--          </td>-->
<!--          <td >-->
<!--            <span class="p-column-title">Refus</span>-->
<!--            {{tamis.refus}}-->


<!--          </td>-->


<!--          <td >-->
<!--            <span class="p-column-title">Refus Cumulated</span>-->
<!--            {{tamis.refusCumulated}}-->
<!--          </td>-->
<!--          <td>-->
<!--            <span class="p-column-title">pass Cumulated</span>-->
<!--            {{tamis.passCumulated}}-->
<!--          </td>-->



<!--          <div class="flex ">-->
<!--            <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteTamis(tamis)"></button>-->
<!--            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success" (click)="editTamis(tamis)"></button>-->
<!--          </div>-->

<!--        </tr>-->
<!--      </ng-template>-->
<!--    </p-table>-->



    <div class="card">
      <p-table
        [columns]="selectedColumns"
        [value]="listeLignesCommandes"
        [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="caption">
          <p-multiSelect
            display="chip"
            [options]="cols"
            [(ngModel)]="selectedColumns"
            optionLabel="header"
            selectedItemsLabel="{0} columns selected"
            [style]="{'min-width': '200px'}"
            placeholder="Choose Columns" />

          <p-dropdown
            [options]="listcalibre"
            [(ngModel)]="selectedColumnsCalibre"
            optionLabel="header"
            [showClear]="true"
            (onChange)="changeCalibre()"
            placeholder="Choose Calibre" />

        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>

            <th *ngFor="let col of columns">
              {{col.header}}
            </th>

          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-lineCommande let-columns="columns">
          <tr >
            <td *ngFor="let col of columns">
              {{getValueOfligneCommande(col,lineCommande)}}
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>


  </div>
</div>

<!---->
<div class=" flex col-12 justify-content-end">
  <button pButton label="Save" icon="pi pi-check" class=" " (click)="saveCommande()"></button>
</div>






